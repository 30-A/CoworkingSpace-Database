# Coworking Space Database Management System

This project is a relational database system designed to manage the core operations of a coworking space. It handles member management, space booking, payments and security auditing.

The system is designed to be ACID-compliant, which ensurs data integrity during reservations (preventing double bookings) and uses triggers for automatic audit logging.

---

### Project Structure

```text
coworking_space/
├── queries/
│   ├── 01_create_tables.sql
│   ├── 02_import_data.sql
│   ├── 03_create_indexes.sql
│   ├── 04_crud_operations.sql
│   ├── 05_joins_and_aggregations.sql
│   ├── 06_stored_procedures.sql
│   ├── 07_triggers.sql
│   └── 08_transactions.sql
├── data/
│   ├── membership_plans.csv
│   ├── spaces.csv
│   ├── office_holidays.csv
│   ├── members.csv
│   ├── bookings.csv
│   └── payments.csv
├── ERD/
│   ├── er_diagram.png
│   └── er_diagram_2.png
└── README.md
```

---

### SQL Files

| File | Description |
|---|---|
| 01\_create\_tables.sql | Creates database schema |
| 02\_import\_data.sql | Imports data from CSV files |
| 03\_create\_indexes.sql | Creates indexes |
| 04\_crud\_operations.sql | Basic operations (INSERT, SELECT, UPDATE, DELETE) |
| 05\_joins\_and\_aggregations.sql | Queries using JOINs and Grouping |
| 06\_stored\_procedures.sql | Reusable procedures |
| 07\_triggers.sql | Triggers for logging booking changes |
| 08\_transactions.sql | Transaction that prevent double bookings |

---

### Database Schema

#### MembershipPlans (7 records)

Stores the available membership options and their duration.

| Column | Type | Description |
|---|---|---|
| plan\_id | INT | Primary key |
| plan\_name | VARCHAR(50) | Name (e.g., Day Pass, Monthly Pass) |
| price | DECIMAL(10,2) | Cost of the plan |
| duration\_days | INT | Validity period in days |

#### Spaces (150 records)

Stores all bookable workspaces.

| Column | Type | Description |
|---|---|---|
| space\_id | INT | Primary key |
| space\_name | VARCHAR(50) | Name of the space |
| space\_type | VARCHAR(50) | Type (Hot Desk, Meeting Room, etc.) |
| is\_maintenance | BOOLEAN | 0 = Active, 1 = Under Maintenance |

#### OfficeHolidays (10 records)

Stores dates when the office is closed.

| Column | Type | Description |
|---|---|---|
| holiday\_date | DATE | Primary key (Date the office is closed) |
| holiday\_name | VARCHAR(50) | Name of the holiday |

#### Members (1500 records)

Stores registered members and their access dates.

| Column | Type | Description |
|---|---|---|
| member\_id | INT | Primary key |
| first\_name | VARCHAR(50) | First name |
| last\_name | VARCHAR(50) | Last name |
| email | VARCHAR(100) | Email (unique) |
| membership\_start\_date | DATE | Date membership begins |
| membership\_expiry\_date | DATE | Date membership ends |

#### Bookings (6806 records)

Stores space reservations.

| Column | Type | Description |
|---|---|---|
| booking\_id | INT | Primary key |
| member\_id | INT | Foreign key to Members |
| space\_id | INT | Foreign key to Spaces |
| booking\_date | DATE | Date of booking |
| start\_time | TIME | Start time |
| end\_time | TIME | End time |
| is\_cancelled | BOOLEAN | 0 = Active, 1 = Cancelled |
| created\_at | TIMESTAMP | Automatic timestamp |

#### Payments (2165 records)

Stores all financial transactions linked to plans.

| Column | Type | Description |
|---|---|---|
| payment\_id | INT | Primary key |
| member\_id | INT | Foreign key to Members |
| plan\_id | INT | Foreign key to MembershipPlans |
| amount | DECIMAL(10,2) | Payment amount |
| payment\_date | DATE | Date of payment |
| payment\_method | ENUM | Cash, Card, Bank Transfer |

#### BookingLog (2 records)

Audit log that tracks booking changes (populated by triggers).

| Column | Type | Description |
|---|---|---|
| log\_id | INT | Primary key |
| booking\_id | INT | Related booking |
| action | VARCHAR(50) | Action type (NEW\_BOOKING, CANCELLED) |
| log\_timestamp | TIMESTAMP | When the event occurred |

---

### Business Questions Answered

The following business questions are answered via queries in the SQL files:

  * **Q1:** Which members have an active membership valid for today? *(file 04)*
  * **Q2:** Which spaces are currently down for maintenance? *(file 04)*
  * **Q3:** How do we update a member's email address? *(file 04)*
  * **Q4:** What is the total revenue generated by each Membership Plan? *(file 05)*
  * **Q5:** Which are the Top 5 most booked spaces in the office? *(file 05)*
  * **Q6:** Who are our VIPs (Top 10 members by total money spent)? *(file 05)*
  * **Q7:** How many hours of usage has each workspace type provided? *(file 05)*
  * **Q8:** What are the busiest days of the week? *(file 05)*
  * **Q9:** How much revenue was generated between two dates? *(file 06)*
  * **Q10:** What is the full booking history for a specific member? *(file 06)*
  * **Q11:** How to safely create a booking (Transaction)? *(file 08)*

---

### Tools

  * MySQL 9.5.0
  * DataGrip 2025.2.4

---

### Author

  * Mohamed Amine Aouini
